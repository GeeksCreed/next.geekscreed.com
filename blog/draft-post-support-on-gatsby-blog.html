<!DOCTYPE html><html lang="en"><head><link rel="alternate" type="application/rss+xml" title="RSS feed for blog posts" href="https://geekscreed.com/rss.xml"/><script data-ad-client="ca-pub-1711202580300085" async="" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-129019237-1"></script><script>
                        window.dataLayer = window.dataLayer || [];
                        function gtag(){dataLayer.push(arguments);}
                        gtag('js', new Date());
                        gtag('config', 'UA-129019237-1', {
                          page_path: window.location.pathname,
                        });
                      </script><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="HandheldFriendly" content="True"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><link rel="preconnect" href="https://polyfill.io"/><link rel="dns-prefetch" href="https://polyfill.io"/><link rel="icon" href="/images/icon.png"/><meta name="description" content="Tech Blog or Geeks and Hobbyists ðŸ’»"/><meta name="twitter:site" content="@theGeeksCreed"/><meta property="og:site_name" content="GeeksCreed"/><script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": "Organization",
    "name": "GeeksCreed",
    "url": "https://geekscreed.com",
    "sameAs": [
      "http://www.facebook.com/theGeeksCreed","http://www.twitter.com/theGeeksCreed"
     ]
  }</script><title>How to add Draft posts Support to Gatsby blog | GeeksCreed</title><meta name="robots" content="index,follow"/><meta name="googlebot" content="index,follow"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:creator" content="@iamsasivarnan"/><meta property="og:url" content="https://geekscreed.com/blog/draft-post-support-on-gatsby-blog"/><meta property="og:type" content="article"/><meta property="og:title" content="How to add Draft posts Support to Gatsby blog | GeeksCreed"/><meta property="og:description" content="
Ever encountered a situation where you need to skip some unfinished, unpolished posts while deploying your Gatsby blog?

[Gatsby](/tag/gats"/><meta property="og:image" content="/images/blog/drafts.jpg"/><link rel="canonical" href="https://geekscreed.com/blog/draft-post-support-on-gatsby-blog"/><link rel="preload" href="/_next/static/css/3c7f297a0d2e6ebc14a0.css" as="style"/><link rel="stylesheet" href="/_next/static/css/3c7f297a0d2e6ebc14a0.css" data-n-g=""/><link rel="preload" href="/_next/static/css/3e4fe71659d90d946e54.css" as="style"/><link rel="stylesheet" href="/_next/static/css/3e4fe71659d90d946e54.css" data-n-p=""/><noscript data-n-css="true"></noscript><link rel="preload" href="/_next/static/chunks/main-eccc5e4ca40ee94a8b40.js" as="script"/><link rel="preload" href="/_next/static/chunks/webpack-0a20fc30caabf192b8d8.js" as="script"/><link rel="preload" href="/_next/static/chunks/framework.3763fb7d1222e98c7f16.js" as="script"/><link rel="preload" href="/_next/static/chunks/commons.3dd0a72cac53b04146ff.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/_app-e9a1e7a4dee1e763c7cc.js" as="script"/><link rel="preload" href="/_next/static/chunks/3514dee21aaf668fd4df35c78cd288a868c8e7b3.469820340e92f918e2c2.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/blog/%5Bslug%5D-c5774356f4ab31148a13.js" as="script"/></head><body><div id="__next"><header class="m-header with-picture js-header"><div class="m-mobile-topbar" data-aos="fade-down"><button class="m-icon-button in-mobile-topbar js-open-menu" aria-label="Open menu"><span class="icon-menu" aria-hidden="true"></span></button><a class="m-logo in-mobile-topbar" href="/"><img src="/images/logo.png" alt="GeeksCreed"/></a><div class="m-icon-button in-mobile-topbar js-open-search"></div></div><div class="m-menu js-menu"><button class="m-icon-button outlined as-close-menu js-close-menu"><span class="icon-close"></span></button><div class="m-menu__main" data-aos="fade-down"><div class="l-wrapper"><div class="m-nav js-main-nav"><nav class="m-nav__left js-main-nav-left" role="navigation"><ul><li class="only-desktop"><a class="m-logo" href="/"><img src="/images/logo.png" alt="GeeksCreed"/></a></li><li class="nav-{{slug}}{{#if current}} nav-current{{/if}}"><a href="/">Home</a></li><li class="nav-{{slug}}{{#if current}} nav-current{{/if}}"><a href="/tag/web-dev">Web Development</a></li></ul></nav><div class="m-nav__right"><div class="m-toggle-darkmode js-tooltip" tabindex="0"><label for="toggle-darkmode" class="sr-only">Toggle dark mode</label><input type="checkbox" id="toggle-darkmode" class="js-toggle-darkmode"/><div><span class="icon-moon moon" aria-hidden="true"></span><span class="icon-sunny sun" aria-hidden="true"></span></div></div></div></div></div></div></div></header><main class="main-wrap"><article><div class="l-content in-post"><section class="m-hero with-picture" data-aos="fade"><div style="background-image:url(data:image/jpeg;base64,/9j/2wBDAAYEBQYFBAYGBQYHBwYIChAKCgkJChQODwwQFxQYGBcUFhYaHSUfGhsjHBYWICwgIyYnKSopGR8tMC0oMCUoKSj/2wBDAQcHBwoIChMKChMoGhYaKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCj/wAARCAAGAAoDASIAAhEBAxEB/8QAFQABAQAAAAAAAAAAAAAAAAAAAAb/xAAfEAACAQQCAwAAAAAAAAAAAAABAgMABAURE2ESFjH/xAAUAQEAAAAAAAAAAAAAAAAAAAAE/8QAGBEAAwEBAAAAAAAAAAAAAAAAAAECIQP/2gAMAwEAAhEDEQA/AKuC7bIKJbER2uohuJoy4YBfobyBUk9EVGT4vPTzSS+zXMXIxbjSFSq7O9DoUpR7eIXyyqR//9k=)" class="m-hero__picture Image_image__mUyxV in-post Image_imageBeforeLoad__G8pCY"></div></section><div class="l-wrapper in-post js-aos-wrapper" data-aos="fade-up" data-aos-delay="300"><div class="l-post-content js-progress-content"><header class="m-heading"><h1 class="m-heading__title in-post">How to add Draft posts Support to Gatsby blog</h1><div class="m-heading__meta"><a class="m-heading__meta__tag" href="/tag/gatsby">Gatsby</a><span class="m-heading__meta__divider" aria-hidden="true">â€¢</span><span class="m-heading__meta__time">Dec 16, 2018</span></div></header><div class="pos-relative js-post-content"><div><p>Ever encountered a situation where you need to skip some unfinished, unpolished posts while deploying your Gatsby blog?</p>
<p><a href="/tag/gatsby">Gatsby</a> is awesome ðŸ’Ÿ.</p>
<p>Using modern web technologies, it takes care of a lot of optimizations out of the box.</p>
<p>Unlike traditional CMS like <code>WordPress</code> which gives a lot of features out of the box, in Gatsby, we need to hand pick the features that we need for our blog and build it by ourselves. It's not bad. It's cool ðŸ˜Ž.</p>
<blockquote>
<p>With great power comes great responsibility.</p>
</blockquote>
<p>As we have the complete control over adding features to Gatsby, there are lots of ways to achieve a single feature.</p>
<p>In this article, I am gonna walk us through a simpler way to add support for draft posts to your Gatsby blog.</p>
<p>Let's enhance our blog powered by <code>markdown</code> files to skip all the posts which are marked as <code>draft</code> in it's <code>frontmatter</code> while building the site.</p>
<p>First of all, pick your first published post and add <code>draft: false</code>. This will make gatsby to create the <code>graphQL</code> schema for <code>markdownRemark</code> with <code>draft</code> field in it, which is needed in while querying.</p>
<blockquote>
<p><strong>Note:</strong> Gatsby infers the schema during the initial load of the development server. Hence you need to restart the gatsby development server in order to add <code>drafts</code> property to the gatsby schema.</p>
</blockquote>
<p>Add the following filter in every page where you are querying <code>allMarkdownRemark</code>.</p>
<div class="remark-highlight"><pre class="language-diff"><code><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   ...
</span><span class="token prefix unchanged"> </span><span class="token line">   allMarkdownRemark(
</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">      sort: { fields: [frontmatter___date], order: DESC }
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">      sort: { fields: [frontmatter___date], order: DESC },
</span><span class="token prefix inserted">+</span><span class="token line">      filter: {frontmatter: {draft: {ne: true}}}
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   ) {
</span><span class="token prefix unchanged"> </span><span class="token line">   ...</span></span>
</code></pre></div>
<p>Next, add the following change in the graphql query of <code>createPages</code> method in <code>gatsby-node.js</code>. It will create the <code>draft</code> posts during <code>development</code> phase but skips during the <code>production</code> phase.</p>
<div class="remark-highlight"><pre class="language-diff"><code>...
resolve(
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> graphql(
</span><span class="token prefix unchanged"> </span><span class="token line">   `{
</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">      allMarkdownRemark(sort: {fields: [frontmatter___date], order: DESC}, limit: 1000) {
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">      allMarkdownRemark(
</span><span class="token prefix inserted">+</span><span class="token line">       sort: {fields: [frontmatter___date], order: DESC},
</span><span class="token prefix inserted">+</span><span class="token line">         ${
</span><span class="token prefix inserted">+</span><span class="token line">           process.env.NODE_ENV === 'production' ?
</span><span class="token prefix inserted">+</span><span class="token line">           'filter: {frontmatter: {draft: {ne: true}}}' :
</span><span class="token prefix inserted">+</span><span class="token line">           ''
</span><span class="token prefix inserted">+</span><span class="token line">         }
</span><span class="token prefix inserted">+</span><span class="token line">         limit: 1000
</span><span class="token prefix inserted">+</span><span class="token line">      ) {
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">      edges {
</span><span class="token prefix unchanged"> </span><span class="token line">       ...</span></span>
</code></pre></div>
<p>Now in <code>gatsby-config.js</code> file, make the following change to skip draft posts while generating the RSS feed.</p>
<div class="remark-highlight"><pre class="language-diff"><code>...
<span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">  `gatsby-plugin-feed`,
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">  {
</span><span class="token prefix inserted">+</span><span class="token line">     resolve: `gatsby-plugin-feed`,
</span><span class="token prefix inserted">+</span><span class="token line">     options: {
</span><span class="token prefix inserted">+</span><span class="token line">       feeds: [
</span><span class="token prefix inserted">+</span><span class="token line">         {
</span><span class="token prefix inserted">+</span><span class="token line">           query: `
</span><span class="token prefix inserted">+</span><span class="token line">           {
</span><span class="token prefix inserted">+</span><span class="token line">             allMarkdownRemark(
</span><span class="token prefix inserted">+</span><span class="token line">               limit: 1000,
</span><span class="token prefix inserted">+</span><span class="token line">               sort: {order: DESC, fields: [frontmatter___date]},
</span><span class="token prefix inserted">+</span><span class="token line">               filter: {frontmatter: {draft: {ne: true}}}
</span><span class="token prefix inserted">+</span><span class="token line">             ) {
</span><span class="token prefix inserted">+</span><span class="token line">               edges {
</span><span class="token prefix inserted">+</span><span class="token line">                 node {
</span><span class="token prefix inserted">+</span><span class="token line">                   excerpt
</span><span class="token prefix inserted">+</span><span class="token line">                   html
</span><span class="token prefix inserted">+</span><span class="token line">                   fields {
</span><span class="token prefix inserted">+</span><span class="token line">                     slug
</span><span class="token prefix inserted">+</span><span class="token line">                   }
</span><span class="token prefix inserted">+</span><span class="token line">                   frontmatter {
</span><span class="token prefix inserted">+</span><span class="token line">                     title
</span><span class="token prefix inserted">+</span><span class="token line">                     date
</span><span class="token prefix inserted">+</span><span class="token line">                   }
</span><span class="token prefix inserted">+</span><span class="token line">                 }
</span><span class="token prefix inserted">+</span><span class="token line">               }
</span><span class="token prefix inserted">+</span><span class="token line">             }
</span><span class="token prefix inserted">+</span><span class="token line">           }
</span><span class="token prefix inserted">+</span><span class="token line">           `,
</span><span class="token prefix inserted">+</span><span class="token line">           output: `rss.xml`
</span><span class="token prefix inserted">+</span><span class="token line">         },
</span><span class="token prefix inserted">+</span><span class="token line">       ]
</span><span class="token prefix inserted">+</span><span class="token line">     }
</span><span class="token prefix inserted">+</span><span class="token line"> },
</span></span>...
</code></pre></div>
<p>That's it. Now your blog has support for draft posts. Any post which is marked as <code>draft: true</code> in its front matter will be skipped during the build time and available during the development time.</p>
<p>I haven't covered every case. But this is applicable to most of the cases.</p>
<p>Once check the list of plugins you use in your <code>gatsby-config.js</code> file. You might be using some other plugins like <a href="https://www.gatsbyjs.org/packages/gatsby-plugin-feed-generator/">gatsby-plugin-feed-generator</a>. You would need to configure it's graphql query accordingly.</p>
<p>Hope I have helped you in adding drafts feature to your Gatsby blog with a minimal effort.</p>
<p>Did this post help you to achieve it or found it complicated?</p>
<p>Feel free to share your thoughts in the comments section.</p>
</div><div class="m-share"><div class="m-share__content js-sticky"><a href="https://www.facebook.com/sharer/sharer.php?u=https://geekscreed.com/blog/draft-post-support-on-gatsby-blog" class="m-icon-button filled in-share" target="_blank" rel="noopener" aria-label="Facebook"><span class="icon-facebook" aria-hidden="true"></span></a><a href="https://twitter.com/intent/tweet?text=How to add Draft posts Support to Gatsby blog&amp;url=https://geekscreed.com/blog/draft-post-support-on-gatsby-blog" class="m-icon-button filled in-share" target="_blank" rel="noopener" aria-label="Twitter"><span class="icon-twitter" aria-hidden="true"></span></a><button class="m-icon-button filled in-share progress js-scrolltop"><span class="icon-arrow-top" aria-hidden="true"></span><svg aria-hidden="true" viewBox="0 0 32.4 32.4" style="opacity:1"><circle class="progress-ring__circle js-progress" fill="transparent" r="14.2" stroke-width="3" cx="16.2" cy="16.2" style="stroke-dasharray:101.788px, 101.788px;stroke-dashoffset:0"></circle></svg></button></div></div><section class="m-tags in-post"><h3 class="m-submenu-title">Tags</h3><ul><li><a href="/tag/gatsby">Gatsby</a></li><li><a href="/tag/web-dev">Web Development</a></li><li><a href="/tag/graphql">GraphQL</a></li></ul></section></div></div></div><section class="m-author"><div class="m-author__content"><div class="m-author__picture"><a class="m-author-picture" aria-label="Sasivarnan R" href="/author/sasivarnan"><div style="background-image:url(https://avatars0.githubusercontent.com/u/5305600?v=4)"></div></a></div><div class="m-author__info"><h4 class="m-author__name"><a href="/author/sasivarnan">Sasivarnan R</a></h4><p class="m-author__bio">Software Engineer. Tech Enthusiast. Loves coding ðŸ’» and music ðŸŽ¼.</p><ul class="m-author-links"><li><a href="https://geekscreed.com" target="_blank" rel="noopener" aria-label="Website"><span class="icon-globe" aria-hidden="true"></span></a></li><li><a href="https://twitter.com/iamsasivarnan" target="_blank" rel="noopener" aria-label="Twitter"><span class="icon-twitter" aria-hidden="true"></span></a></li><li><a href="https://linkedin.com/in/sasivarnan" target="_blank" rel="noopener" aria-label="Linkedin"><span class="icon-linkedin" aria-hidden="true"></span></a></li></ul></div></div></section><section class="m-comments"><div class="m-load-comments "><div class="m-load-comments__line"></div><button class="m-icon-button filled as-load-comments js-tooltip js-load-comments"><span class="icon-comments"></span></button></div><div class="m-load-comments__iframe l-wrapper in-comments js-comments-iframe hide" data-aos="fade-up"><div id="disqus_thread"></div></div></section></div></article></main><footer class="m-footer"><div class="m-footer__content"><p class="m-footer-copyright"><span>GeeksCreed<!-- --> Â© 2020</span><span>Â  â€¢ Â </span><span>Theme by<!-- --> <a href="https://eduardogomez.io/" target="_blank" rel="noopener">Eduardo GÃ³mez</a></span><span> Â  </span><span>Built with<!-- --> <a href="https://nextjs.org" target="_blank" rel="noopener">Next.js</a></span></p><nav class="m-footer-social"><a href="https://facebook.com/theGeeksCreed" target="_blank" rel="noopener" aria-label="Facebook"><span class="icon-facebook" aria-hidden="true"></span></a><a href="https://twitter.com/theGeeksCreed" target="_blank" rel="noopener" aria-label="Twitter"><span class="icon-twitter" aria-hidden="true"></span></a></nav></div></footer></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"_published_at":"2018-12-16T00:00:00.000Z","title":"How to add Draft posts Support to Gatsby blog","published_at":"Dec 16, 2018","slug":"draft-post-support-on-gatsby-blog","authors":[{"id":"sasivarnan","name":"Sasivarnan R","bio":"Software Engineer. Tech Enthusiast. Loves coding ðŸ’» and music ðŸŽ¼.","location":"India","website":"https://geekscreed.com","twitter":"iamsasivarnan","linkedin":"sasivarnan","profile_image":"https://avatars0.githubusercontent.com/u/5305600?v=4","cover_image":""}],"content":"\u003cp\u003eEver encountered a situation where you need to skip some unfinished, unpolished posts while deploying your Gatsby blog?\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"/tag/gatsby\"\u003eGatsby\u003c/a\u003e is awesome ðŸ’Ÿ.\u003c/p\u003e\n\u003cp\u003eUsing modern web technologies, it takes care of a lot of optimizations out of the box.\u003c/p\u003e\n\u003cp\u003eUnlike traditional CMS like \u003ccode\u003eWordPress\u003c/code\u003e which gives a lot of features out of the box, in Gatsby, we need to hand pick the features that we need for our blog and build it by ourselves. It's not bad. It's cool ðŸ˜Ž.\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003eWith great power comes great responsibility.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eAs we have the complete control over adding features to Gatsby, there are lots of ways to achieve a single feature.\u003c/p\u003e\n\u003cp\u003eIn this article, I am gonna walk us through a simpler way to add support for draft posts to your Gatsby blog.\u003c/p\u003e\n\u003cp\u003eLet's enhance our blog powered by \u003ccode\u003emarkdown\u003c/code\u003e files to skip all the posts which are marked as \u003ccode\u003edraft\u003c/code\u003e in it's \u003ccode\u003efrontmatter\u003c/code\u003e while building the site.\u003c/p\u003e\n\u003cp\u003eFirst of all, pick your first published post and add \u003ccode\u003edraft: false\u003c/code\u003e. This will make gatsby to create the \u003ccode\u003egraphQL\u003c/code\u003e schema for \u003ccode\u003emarkdownRemark\u003c/code\u003e with \u003ccode\u003edraft\u003c/code\u003e field in it, which is needed in while querying.\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003e\u003cstrong\u003eNote:\u003c/strong\u003e Gatsby infers the schema during the initial load of the development server. Hence you need to restart the gatsby development server in order to add \u003ccode\u003edrafts\u003c/code\u003e property to the gatsby schema.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eAdd the following filter in every page where you are querying \u003ccode\u003eallMarkdownRemark\u003c/code\u003e.\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-diff\"\u003e\u003ccode\u003e\u003cspan class=\"token unchanged\"\u003e\u003cspan class=\"token prefix unchanged\"\u003e \u003c/span\u003e\u003cspan class=\"token line\"\u003e   ...\n\u003c/span\u003e\u003cspan class=\"token prefix unchanged\"\u003e \u003c/span\u003e\u003cspan class=\"token line\"\u003e   allMarkdownRemark(\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token deleted-sign deleted\"\u003e\u003cspan class=\"token prefix deleted\"\u003e-\u003c/span\u003e\u003cspan class=\"token line\"\u003e      sort: { fields: [frontmatter___date], order: DESC }\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token inserted-sign inserted\"\u003e\u003cspan class=\"token prefix inserted\"\u003e+\u003c/span\u003e\u003cspan class=\"token line\"\u003e      sort: { fields: [frontmatter___date], order: DESC },\n\u003c/span\u003e\u003cspan class=\"token prefix inserted\"\u003e+\u003c/span\u003e\u003cspan class=\"token line\"\u003e      filter: {frontmatter: {draft: {ne: true}}}\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token unchanged\"\u003e\u003cspan class=\"token prefix unchanged\"\u003e \u003c/span\u003e\u003cspan class=\"token line\"\u003e   ) {\n\u003c/span\u003e\u003cspan class=\"token prefix unchanged\"\u003e \u003c/span\u003e\u003cspan class=\"token line\"\u003e   ...\u003c/span\u003e\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eNext, add the following change in the graphql query of \u003ccode\u003ecreatePages\u003c/code\u003e method in \u003ccode\u003egatsby-node.js\u003c/code\u003e. It will create the \u003ccode\u003edraft\u003c/code\u003e posts during \u003ccode\u003edevelopment\u003c/code\u003e phase but skips during the \u003ccode\u003eproduction\u003c/code\u003e phase.\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-diff\"\u003e\u003ccode\u003e...\nresolve(\n\u003cspan class=\"token unchanged\"\u003e\u003cspan class=\"token prefix unchanged\"\u003e \u003c/span\u003e\u003cspan class=\"token line\"\u003e graphql(\n\u003c/span\u003e\u003cspan class=\"token prefix unchanged\"\u003e \u003c/span\u003e\u003cspan class=\"token line\"\u003e   `{\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token deleted-sign deleted\"\u003e\u003cspan class=\"token prefix deleted\"\u003e-\u003c/span\u003e\u003cspan class=\"token line\"\u003e      allMarkdownRemark(sort: {fields: [frontmatter___date], order: DESC}, limit: 1000) {\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token inserted-sign inserted\"\u003e\u003cspan class=\"token prefix inserted\"\u003e+\u003c/span\u003e\u003cspan class=\"token line\"\u003e      allMarkdownRemark(\n\u003c/span\u003e\u003cspan class=\"token prefix inserted\"\u003e+\u003c/span\u003e\u003cspan class=\"token line\"\u003e       sort: {fields: [frontmatter___date], order: DESC},\n\u003c/span\u003e\u003cspan class=\"token prefix inserted\"\u003e+\u003c/span\u003e\u003cspan class=\"token line\"\u003e         ${\n\u003c/span\u003e\u003cspan class=\"token prefix inserted\"\u003e+\u003c/span\u003e\u003cspan class=\"token line\"\u003e           process.env.NODE_ENV === 'production' ?\n\u003c/span\u003e\u003cspan class=\"token prefix inserted\"\u003e+\u003c/span\u003e\u003cspan class=\"token line\"\u003e           'filter: {frontmatter: {draft: {ne: true}}}' :\n\u003c/span\u003e\u003cspan class=\"token prefix inserted\"\u003e+\u003c/span\u003e\u003cspan class=\"token line\"\u003e           ''\n\u003c/span\u003e\u003cspan class=\"token prefix inserted\"\u003e+\u003c/span\u003e\u003cspan class=\"token line\"\u003e         }\n\u003c/span\u003e\u003cspan class=\"token prefix inserted\"\u003e+\u003c/span\u003e\u003cspan class=\"token line\"\u003e         limit: 1000\n\u003c/span\u003e\u003cspan class=\"token prefix inserted\"\u003e+\u003c/span\u003e\u003cspan class=\"token line\"\u003e      ) {\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token unchanged\"\u003e\u003cspan class=\"token prefix unchanged\"\u003e \u003c/span\u003e\u003cspan class=\"token line\"\u003e      edges {\n\u003c/span\u003e\u003cspan class=\"token prefix unchanged\"\u003e \u003c/span\u003e\u003cspan class=\"token line\"\u003e       ...\u003c/span\u003e\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eNow in \u003ccode\u003egatsby-config.js\u003c/code\u003e file, make the following change to skip draft posts while generating the RSS feed.\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-diff\"\u003e\u003ccode\u003e...\n\u003cspan class=\"token deleted-sign deleted\"\u003e\u003cspan class=\"token prefix deleted\"\u003e-\u003c/span\u003e\u003cspan class=\"token line\"\u003e  `gatsby-plugin-feed`,\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token inserted-sign inserted\"\u003e\u003cspan class=\"token prefix inserted\"\u003e+\u003c/span\u003e\u003cspan class=\"token line\"\u003e  {\n\u003c/span\u003e\u003cspan class=\"token prefix inserted\"\u003e+\u003c/span\u003e\u003cspan class=\"token line\"\u003e     resolve: `gatsby-plugin-feed`,\n\u003c/span\u003e\u003cspan class=\"token prefix inserted\"\u003e+\u003c/span\u003e\u003cspan class=\"token line\"\u003e     options: {\n\u003c/span\u003e\u003cspan class=\"token prefix inserted\"\u003e+\u003c/span\u003e\u003cspan class=\"token line\"\u003e       feeds: [\n\u003c/span\u003e\u003cspan class=\"token prefix inserted\"\u003e+\u003c/span\u003e\u003cspan class=\"token line\"\u003e         {\n\u003c/span\u003e\u003cspan class=\"token prefix inserted\"\u003e+\u003c/span\u003e\u003cspan class=\"token line\"\u003e           query: `\n\u003c/span\u003e\u003cspan class=\"token prefix inserted\"\u003e+\u003c/span\u003e\u003cspan class=\"token line\"\u003e           {\n\u003c/span\u003e\u003cspan class=\"token prefix inserted\"\u003e+\u003c/span\u003e\u003cspan class=\"token line\"\u003e             allMarkdownRemark(\n\u003c/span\u003e\u003cspan class=\"token prefix inserted\"\u003e+\u003c/span\u003e\u003cspan class=\"token line\"\u003e               limit: 1000,\n\u003c/span\u003e\u003cspan class=\"token prefix inserted\"\u003e+\u003c/span\u003e\u003cspan class=\"token line\"\u003e               sort: {order: DESC, fields: [frontmatter___date]},\n\u003c/span\u003e\u003cspan class=\"token prefix inserted\"\u003e+\u003c/span\u003e\u003cspan class=\"token line\"\u003e               filter: {frontmatter: {draft: {ne: true}}}\n\u003c/span\u003e\u003cspan class=\"token prefix inserted\"\u003e+\u003c/span\u003e\u003cspan class=\"token line\"\u003e             ) {\n\u003c/span\u003e\u003cspan class=\"token prefix inserted\"\u003e+\u003c/span\u003e\u003cspan class=\"token line\"\u003e               edges {\n\u003c/span\u003e\u003cspan class=\"token prefix inserted\"\u003e+\u003c/span\u003e\u003cspan class=\"token line\"\u003e                 node {\n\u003c/span\u003e\u003cspan class=\"token prefix inserted\"\u003e+\u003c/span\u003e\u003cspan class=\"token line\"\u003e                   excerpt\n\u003c/span\u003e\u003cspan class=\"token prefix inserted\"\u003e+\u003c/span\u003e\u003cspan class=\"token line\"\u003e                   html\n\u003c/span\u003e\u003cspan class=\"token prefix inserted\"\u003e+\u003c/span\u003e\u003cspan class=\"token line\"\u003e                   fields {\n\u003c/span\u003e\u003cspan class=\"token prefix inserted\"\u003e+\u003c/span\u003e\u003cspan class=\"token line\"\u003e                     slug\n\u003c/span\u003e\u003cspan class=\"token prefix inserted\"\u003e+\u003c/span\u003e\u003cspan class=\"token line\"\u003e                   }\n\u003c/span\u003e\u003cspan class=\"token prefix inserted\"\u003e+\u003c/span\u003e\u003cspan class=\"token line\"\u003e                   frontmatter {\n\u003c/span\u003e\u003cspan class=\"token prefix inserted\"\u003e+\u003c/span\u003e\u003cspan class=\"token line\"\u003e                     title\n\u003c/span\u003e\u003cspan class=\"token prefix inserted\"\u003e+\u003c/span\u003e\u003cspan class=\"token line\"\u003e                     date\n\u003c/span\u003e\u003cspan class=\"token prefix inserted\"\u003e+\u003c/span\u003e\u003cspan class=\"token line\"\u003e                   }\n\u003c/span\u003e\u003cspan class=\"token prefix inserted\"\u003e+\u003c/span\u003e\u003cspan class=\"token line\"\u003e                 }\n\u003c/span\u003e\u003cspan class=\"token prefix inserted\"\u003e+\u003c/span\u003e\u003cspan class=\"token line\"\u003e               }\n\u003c/span\u003e\u003cspan class=\"token prefix inserted\"\u003e+\u003c/span\u003e\u003cspan class=\"token line\"\u003e             }\n\u003c/span\u003e\u003cspan class=\"token prefix inserted\"\u003e+\u003c/span\u003e\u003cspan class=\"token line\"\u003e           }\n\u003c/span\u003e\u003cspan class=\"token prefix inserted\"\u003e+\u003c/span\u003e\u003cspan class=\"token line\"\u003e           `,\n\u003c/span\u003e\u003cspan class=\"token prefix inserted\"\u003e+\u003c/span\u003e\u003cspan class=\"token line\"\u003e           output: `rss.xml`\n\u003c/span\u003e\u003cspan class=\"token prefix inserted\"\u003e+\u003c/span\u003e\u003cspan class=\"token line\"\u003e         },\n\u003c/span\u003e\u003cspan class=\"token prefix inserted\"\u003e+\u003c/span\u003e\u003cspan class=\"token line\"\u003e       ]\n\u003c/span\u003e\u003cspan class=\"token prefix inserted\"\u003e+\u003c/span\u003e\u003cspan class=\"token line\"\u003e     }\n\u003c/span\u003e\u003cspan class=\"token prefix inserted\"\u003e+\u003c/span\u003e\u003cspan class=\"token line\"\u003e },\n\u003c/span\u003e\u003c/span\u003e...\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eThat's it. Now your blog has support for draft posts. Any post which is marked as \u003ccode\u003edraft: true\u003c/code\u003e in its front matter will be skipped during the build time and available during the development time.\u003c/p\u003e\n\u003cp\u003eI haven't covered every case. But this is applicable to most of the cases.\u003c/p\u003e\n\u003cp\u003eOnce check the list of plugins you use in your \u003ccode\u003egatsby-config.js\u003c/code\u003e file. You might be using some other plugins like \u003ca href=\"https://www.gatsbyjs.org/packages/gatsby-plugin-feed-generator/\"\u003egatsby-plugin-feed-generator\u003c/a\u003e. You would need to configure it's graphql query accordingly.\u003c/p\u003e\n\u003cp\u003eHope I have helped you in adding drafts feature to your Gatsby blog with a minimal effort.\u003c/p\u003e\n\u003cp\u003eDid this post help you to achieve it or found it complicated?\u003c/p\u003e\n\u003cp\u003eFeel free to share your thoughts in the comments section.\u003c/p\u003e\n","excerpt":"\nEver encountered a situation where you need to skip some unfinished, unpolished posts while deploying your Gatsby blog?\n\n[Gatsby](/tag/gats","feature_image":"/images/blog/drafts.jpg","primary_tag":{"id":"gatsby","name":"Gatsby","slug":"gatsby","description":"Articles around Gatsby","feature_image":""},"tags":["gatsby","web-dev","graphql"]},"tags":[{"id":"gatsby","name":"Gatsby","slug":"gatsby","description":"Articles around Gatsby","feature_image":""},{"id":"web-dev","name":"Web Development","slug":"web-dev","description":"Articles around Web Development","feature_image":""},{"id":"graphql","name":"GraphQL","slug":"graphql","description":"Articles around GraphQL","feature_image":""}]},"__N_SSG":true},"page":"/blog/[slug]","query":{"slug":"draft-post-support-on-gatsby-blog"},"buildId":"NkU_m2Hpo28zJyMP5EVpY","nextExport":false,"isFallback":false,"gsp":true,"head":[["meta",{"charSet":"utf-8"}],["meta",{"httpEquiv":"X-UA-Compatible","content":"IE=edge"}],["meta",{"name":"HandheldFriendly","content":"True"}],["meta",{"name":"viewport","content":"width=device-width, initial-scale=1.0"}],["link",{"rel":"preconnect","href":"https://polyfill.io"}],["link",{"rel":"dns-prefetch","href":"https://polyfill.io"}],["link",{"rel":"icon","href":"/images/icon.png"}],["meta",{"name":"description","content":"Tech Blog or Geeks and Hobbyists ðŸ’»"}],["meta",{"name":"twitter:site","content":"@theGeeksCreed"}],["meta",{"property":"og:site_name","content":"GeeksCreed"}],["script",{"type":"application/ld+json","dangerouslySetInnerHTML":{"__html":"{\n    \"@context\": \"http://schema.org\",\n    \"@type\": \"Organization\",\n    \"name\": \"GeeksCreed\",\n    \"url\": \"https://geekscreed.com\",\n    \"sameAs\": [\n      \"http://www.facebook.com/theGeeksCreed\",\"http://www.twitter.com/theGeeksCreed\"\n     ]\n  }"}}],["title",{"children":"How to add Draft posts Support to Gatsby blog | GeeksCreed"}],["meta",{"name":"robots","content":"index,follow"}],["meta",{"name":"googlebot","content":"index,follow"}],["meta",{"name":"twitter:card","content":"summary_large_image"}],["meta",{"name":"twitter:creator","content":"@iamsasivarnan"}],["meta",{"property":"og:url","content":"https://geekscreed.com/blog/draft-post-support-on-gatsby-blog"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:title","content":"How to add Draft posts Support to Gatsby blog | GeeksCreed"}],["meta",{"property":"og:description","content":"\nEver encountered a situation where you need to skip some unfinished, unpolished posts while deploying your Gatsby blog?\n\n[Gatsby](/tag/gats"}],["meta",{"property":"og:image","content":"/images/blog/drafts.jpg"}],["link",{"rel":"canonical","href":"https://geekscreed.com/blog/draft-post-support-on-gatsby-blog"}]]}</script><script nomodule="" src="/_next/static/chunks/polyfills-4fd530662c07751b0ca0.js"></script><script src="/_next/static/chunks/main-eccc5e4ca40ee94a8b40.js" async=""></script><script src="/_next/static/chunks/webpack-0a20fc30caabf192b8d8.js" async=""></script><script src="/_next/static/chunks/framework.3763fb7d1222e98c7f16.js" async=""></script><script src="/_next/static/chunks/commons.3dd0a72cac53b04146ff.js" async=""></script><script src="/_next/static/chunks/pages/_app-e9a1e7a4dee1e763c7cc.js" async=""></script><script src="/_next/static/chunks/3514dee21aaf668fd4df35c78cd288a868c8e7b3.469820340e92f918e2c2.js" async=""></script><script src="/_next/static/chunks/pages/blog/%5Bslug%5D-c5774356f4ab31148a13.js" async=""></script><script src="/_next/static/NkU_m2Hpo28zJyMP5EVpY/_buildManifest.js" async=""></script><script src="/_next/static/NkU_m2Hpo28zJyMP5EVpY/_ssgManifest.js" async=""></script></body></html>